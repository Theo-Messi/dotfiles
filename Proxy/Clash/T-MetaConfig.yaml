# Updated: CST 2024-09-04 13:27:25
# Author: Theo-Messi
# GitHub Source: https://github.com/Theo-Messi/dotfiles

pp: &pp { type: http, interval: 86400, health-check: { enable: true, url: http://www.gstatic.com/generate_204, interval: 600, format: yaml } }
pc: &pc { type: http, behavior: classical, interval: 86400, format: yaml }
pd: &pd { type: http, behavior: domain, interval: 86400, format: yaml }
pdm: &pdm { type: http, behavior: domain, interval: 86400, format: mrs }
pi: &pi { type: http, behavior: ipcidr, interval: 86400, format: mrs }
o1: &o1 { type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ’  å…¶ä»–åœ°åŒº, ğŸ¯ å…¨çƒç›´è¿], include-all-providers: true }
o2: &o2 { type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ’  å…¶ä»–åœ°åŒº] }

# è®¢é˜…åç§°
proxy-providers:
  sub1:
    <<: *pp
    url: ''

  sub2:
    <<: *pp
    url: ''

  sub3:
    <<: *pp
    url: ''

#ç­–ç•¥ç»„
proxy-groups:
  - { name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ’  å…¶ä»–åœ°åŒº], include-all-providers: true }
  - { name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, interval: 600, tolerance: 100, lazy: true, url: https://www.gstatic.com/generate_204, include-all-providers: true }
  - { name: ğŸ“² ç”µæŠ¥ä¿¡æ¯, <<: *o1 }
  - { name: ğŸ“± Twitter, <<: *o1 }
  - { name: â˜£ï¸ AIå¹³å°, <<: *o1 }
  - { name: ğŸ¬ æ²¹ç®¡è§†é¢‘, <<: *o1 }
  - { name: ğŸ¥ å¥ˆé£è§†é¢‘, <<: *o1 }
  - { name: ğŸ° Disney, <<: *o1 }
  - { name: ğŸ“½ï¸ å·´å“ˆå§†ç‰¹, type: select, proxies: [ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: ğŸ“º å“”å“©å“”å“©, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹] }
  - { name: ğŸŒ å›½å¤–åª’ä½“, <<: *o1 }
  - { name: ğŸŒ å›½å†…åª’ä½“, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: â“‚ï¸ å¾®è½¯æœåŠ¡, <<: *o2 }
  - { name: ğŸ è‹¹æœæœåŠ¡, <<: *o2 }
  - { name: ğŸ® æ¸¸æˆå¹³å°, <<: *o2 }
  - { name: ğŸ”° ä¸‹è½½å¹³å°, <<: *o2 }
  - { name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, REJECT] }
  - { name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *o1 }

  #åœ°åŒºç­–ç•¥ç»„
  - { name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all-providers: true, filter: '(?i)æ¸¯|hk|hong\s?kong' }
  - { name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, type: select, include-all-providers: true, filter: '(?i)å°|tw|tai\s?wan' }
  - { name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, type: select, include-all-providers: true, filter: '(?i)æ–°åŠ å¡|sg|singapore|ç‹®åŸ' }
  - { name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all-providers: true, filter: '(?i)æ—¥|jp|japan' }
  - { name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, type: select, include-all-providers: true, filter: '(?i)ç¾|us|united\s?states' }
  - { name: ğŸ’  å…¶ä»–åœ°åŒº, type: select, include-all-providers: true, filter: '(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hong\s?kong|å°|tw|tai\s?wan|æ—¥|jp|japan|æ–°|sg|singapore|ç‹®åŸ|ç¾|us|united\s?states)).*' }

rules:
  - RULE-SET,T-Direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,T-Global,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN,search.iscrv.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,LocalAreaNetwork,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,Twitter,ğŸ“± Twitter
  - RULE-SET,OpenAI,â˜£ï¸ AIå¹³å°
  - RULE-SET,Copilot,â˜£ï¸ AIå¹³å°
  - RULE-SET,Gemini,â˜£ï¸ AIå¹³å°
  - RULE-SET,YouTube,ğŸ¬ æ²¹ç®¡è§†é¢‘
  - RULE-SET,Disney,ğŸ° Disney
  - RULE-SET,Netflix,ğŸ¥ å¥ˆé£è§†é¢‘
  - RULE-SET,Bahamut,ğŸ“½ï¸ å·´å“ˆå§†ç‰¹
  - RULE-SET,ProxyMedia,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,Category-games,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Download,ğŸ”° ä¸‹è½½å¹³å°
  - RULE-SET,ChinaMedia,ğŸŒ å›½å†…åª’ä½“
  - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,Geosite_cn,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Geosite_private,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ChinaDomain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,GitHub,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Geoip_cn,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,Geoip_private,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  # - RULE-SET,ChinaCompanyIp,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - RULE-SET,ChinaIp,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - DST-PORT,22,ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

rule-providers:
  T-Direct:
    <<: *pc
    url: 'https://dot.theojs.cn/Proxy/Rules/T-DirectList.yaml'
  T-Global:
    <<: *pc
    url: 'https://dot.theojs.cn/Proxy/Rules/T-GlobalList.yaml'
  T-FakeIpFilter:
    <<: *pd
    url: 'https://dot.theojs.cn/Proxy/Clash/T-FakeIpFilter.yaml'
  GitHub:
    <<: *pdm
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/github.mrs'
  Geolocation-!cn:
    <<: *pdm
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/geolocation-!cn.mrs'
  LocalAreaNetwork:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/LocalAreaNetwork.yaml'
  Telegram:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Telegram.yaml'
  Twitter:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Twitter.yaml'
  OpenAI:
    <<: *pc
    url: 'https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/OpenAI/OpenAI_No_Resolve.yaml'
  Copilot:
    <<: *pc
    url: 'https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Copilot/Copilot_No_Resolve.yaml'
  Gemini:
    <<: *pc
    url: 'https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Gemini/Gemini_No_Resolve.yaml'
  YouTube:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/YouTube.yaml'
  Netflix:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Netflix.yaml'
  Disney:
    <<: *pc
    url: 'https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Disney/Disney.yaml'
  Bahamut:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Bahamut.yaml'
  ProxyMedia:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/ProxyMedia.yaml'
  Category-games:
    <<: *pdm
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/category-games.mrs'
  Bilibili:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Bilibili.yaml'
  Download:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Download.yaml'
  ChinaMedia:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/ChinaMedia.yaml'
  GoogleFCM:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/GoogleFCM.yaml'
  Microsoft:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Microsoft.yaml'
  Apple:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/Ruleset/Apple.yaml'
  Geosite_cn:
    <<: *pdm
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/cn.mrs'
  Geosite_private:
    <<: *pdm
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/private.mrs'
  ChinaDomain:
    <<: *pc
    url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/ChinaDomain.yaml'
  Geoip_cn:
    <<: *pi
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/cn.mrs'
  Geoip_private:
    <<: *pi
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/private.mrs'
  # ChinaCompanyIp:
  #   <<: *pi
  #   url: 'https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/ChinaCompanyIp.yaml'
  ChinaIp:
    <<: *pi
    url: 'https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/cn.mrs'

mixed-port: 7890
allow-lan: true
ipv6: true
mode: rule
log-level: debug
external-controller: 0.0.0.0:9090
secret: '123456'
find-process-mode: strict
global-client-fingerprint: chrome
global-ua: clash-verge-rev/v1.7.7
profile:
  store-selected: true
  store-fake-ip: true

dns:
  enable: true
  ipv6: true
  fake-ip-range: 198.18.0.1/16
  listen: 0.0.0.0:7874
  enhanced-mode: fake-ip
  nameserver:
    - https://223.5.5.5/dns-query#h3=true
    - https://223.6.6.6/dns-query#h3=true
  default-nameserver:
    - 223.5.5.5
    - 223.6.6.6
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://dns.pub/dns-query

  fake-ip-filter:
    - RULE-SET,T-FakeIpFilter
    - RULE-SET,Geosite_cn
    - RULE-SET,Geosite_private
    - RULE-SET,Geoip_cn
    - RULE-SET,Geoip_private
    # - RULE-SET,ChinaCompanyIp
    - RULE-SET,ChinaIp
